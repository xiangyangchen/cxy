## 校准参数独立存储落地方案 V0.1

#### 设计原因：

由于自动驾驶激光参数与传感器参数，存在需要频繁更换情况，导致需要重复生成固件，目前的方法费时且不便于多车管理故将校准参数采用独立存储。



```shell
#### 设计思想：

1，在单车新建单独校准参数文件夹      

2，需要考虑数据的备份                          ---（在地面站网关上新建repo，暂且称之为qpilot-hw-parameter）

3，需要给出校准参数具体参数               ---（变动较频繁的）

4，使用不同分支来进行管理不同单车参数，避免错误修改           ---  （分支命名规则 QOMOLO_ROBOT_ID-param）
```



```shell
#### 技术实现：

数据备份： --> 编写脚本实时监控文件夹文件及文件夹state变动，并提交到gitlab保证备份问题 <--   

			​		具体实现：

			​		设置检测时间为最后一次修改文件后延迟一分钟自动提交，将自动同步到地面站网关qpilot-hw-parameter的repo中进行存储，需要保留修改文件者名称，后续修改进行短期内验证是否为同一人修改，是则跳过该环节，否则需要提供名字/密码到.env，每个单车必须使用不同分支，且检测完毕后需要清空.env									

代码参数读取： --> 需要修改部分代码中读取校准参数的路径为绝对路径 <--
```





#### 目前已知麻烦点：

- ~~文件修改，可能会导致监控文件夹等状态改变，会导致重复提交~~          <增加等待时间将多个修改一次提交>
- 初次部署费时,  需要确保每个单车使用自己独有的测试分支。               <本地完成创建不同的分支再推送至远端>
- 回退参数会导致重复提交                                                                            <单车本地进行命令行回退>
- 无法说明每次修改的具体信息                                                                     <暂无解决方案>
- #



#### 具体流程：

例：  tj028

将校准参数放到hw-parameter中的tj028-param分支下，程序将会检测文件变化，目前设置检测时间为最后一次修改文件后延迟一分钟自动提交，将自动同步到地面站网关qpilot-hw-parameter的repo中进行存储，同时需要代码中读取参数的绝对路径。